name: CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
      - uses: cachix/install-nix-action@v12
      - uses: cachix/cachix-action@v8
        with:
          name: dretch
          authToken: '${{ secrets.CACHIX_AUTH_TOKEN }}'
      - name: 'Build Libraries'
        run: nix-build
      - name: 'Build Docs'
        run: nix-shell --run 'cd docs && mkdocs build'


